# The 2026 "Pure TS" Stack

> The "Type-Safe Purist" choice for building multi-tenant SaaS applications with 1:1 mental mapping between your code and your data.

---

## Stack Overview

| Layer | Technology | Version | Role |
|-------|------------|---------|------|
| **Frontend** | React | 19.0.0+ | Core UI with React Compiler (Forget) |
| **Framework** | TanStack Start | 1.15+ | Type-safe SSR, Routing, and Server Functions |
| **Backend/DB** | Convex | 1.17+ | Reactive Database and TypeScript Backend |
| **Auth** | Better Auth | 1.4+ | Modular Auth (w/ Organizations plugin) |
| **Styling** | Tailwind CSS | 4.0+ | CSS-first configuration |
| **UI Kit** | Shadcn UI | v2 | Radical new version using Base UI primitives |

---

## Philosophy: Why This Stack?

### React 19 + TanStack Start
TanStack Start is the "anti-magic" alternative to Next.js. It provides full-stack capabilities (SSR, API routes) while maintaining 100% type safety through TanStack Router.

### Convex + Better Auth
Better Auth is designed to be framework-agnostic. Using the `@convex-dev/better-auth` adapter gives you enterprise-grade SaaS auth logic (Organizations, Roles, Multi-tenancy) running directly inside your Convex database.

### The "Single Brain" Effect
Write your schema in TypeScript once, and it automatically generates types for both your frontend hooks and backend functions. No manual syncing required.

---

## Project Structure

```
/project-root
├── /app                  # TanStack Start Application
│   ├── /components       # Shadcn UI (v2) Components
│   ├── /routes           # File-based routing (TanStack Router)
│   │   ├── _authed.tsx   # Auth Layout (checks session)
│   │   ├── api.auth.$.ts # Better Auth Handler
│   │   └── dashboard.tsx # Reactive SaaS Dashboard
│   ├── /lib              # Auth Client & Shared Utils
│   └── main.tsx          # App Entry
├── /convex               # Your "Backend" (Serverless)
│   ├── auth.ts           # Better Auth Server Config
│   ├── schema.ts         # Database Schema (Users, Orgs, Tasks)
│   ├── functions.ts      # Backend Logic (Queries/Mutations)
│   └── http.ts           # HTTP Router (For Auth Webhooks/API)
├── tailwind.config.css   # Tailwind v4 (Direct CSS config)
└── package.json
```

---

## Implementation: The Multi-Tenant Bridge

The key integration is how Better Auth's Organization plugin works with Convex's reactive queries.

### 1. The Multi-Tenant Schema (`convex/schema.ts`)

```typescript
import { defineSchema, defineTable } from "convex/server";
import { v } from "convex/values";

export default defineSchema({
  // Better Auth tables (auto-generated by CLI)
  users: defineTable({ ... }),
  organizations: defineTable({ name: v.string(), slug: v.string() }),
  members: defineTable({ 
    organizationId: v.id("organizations"), 
    userId: v.id("users"), 
    role: v.string() 
  }),

  // Your SaaS Data (The "Tenant" table)
  projects: defineTable({
    name: v.string(),
    orgId: v.id("organizations"), // Every project belongs to an Org
  }).index("by_org", ["orgId"]),
});
```

### 2. The Reactive Query (`convex/functions.ts`)

This query is "live." If an admin changes a project name, the user's dashboard updates instantly without a refresh.

```typescript
import { query } from "./_generated/server";
import { v } from "convex/values";

export const getOrgProjects = query({
  args: { orgId: v.id("organizations") },
  handler: async (ctx, args) => {
    // 1. Get the authenticated user from Better Auth session
    const user = await ctx.auth.getUserIdentity();
    if (!user) return null;

    // 2. Security Check: Is this user a member of this Org?
    const membership = await ctx.db
      .query("members")
      .filter((q) => q.and(
        q.eq(q.field("organizationId"), args.orgId),
        q.eq(q.field("userId"), user.subject as any)
      )).unique();

    if (!membership) throw new Error("Unauthorized");

    // 3. Return the data (Convex handles the reactivity)
    return await ctx.db
      .query("projects")
      .withIndex("by_org", (q) => q.eq("orgId", args.orgId))
      .collect();
  },
});
```

---

## Key Benefits

1. **End-to-End Type Safety** - From database schema to UI components
2. **Reactive by Default** - Real-time updates without WebSocket configuration
3. **Multi-Tenant Ready** - Organizations, roles, and permissions built-in
4. **Framework Agnostic Auth** - Better Auth works across any React framework
5. **No Config Fatigue** - Tailwind v4 uses CSS-first configuration

---

## Getting Started

1. Initialize TanStack Start project
2. Configure Convex with Better Auth adapter
3. Run the Better Auth CLI to generate auth tables
4. Define your tenant-specific schemas
5. Build reactive queries with built-in authorization
